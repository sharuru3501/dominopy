# PyDomino - 開発計画書

## 1. 開発概要

### 1.1 開発期間
- **開始日**: 2025年1月〜
- **Phase 1完了目標**: 2025年3月末
- **Phase 2完了目標**: 2025年6月末
- **Phase 3完了目標**: 2025年9月末

### 1.2 開発体制
- **開発者**: 1名（個人開発）
- **開発手法**: アジャイル開発（2週間スプリント）
- **バージョン管理**: Git

### 1.3 開発環境
- **OS**: macOS / Windows / Linux
- **Python**: 3.11+
- **IDE**: VSCode / PyCharm
- **パッケージ管理**: pip + requirements.txt

## 2. 開発フェーズ

### 2.1 Phase 1: 基本機能実装 ✅ 完了

#### 2.1.1 Sprint 1-2: プロジェクト基盤整備
- [x] プロジェクト構造の設計
- [x] 基本的なGUI フレームワーク構築
- [x] MIDIデータモデルの実装
- [x] 基本的なピアノロール表示

#### 2.1.2 Sprint 3-4: コア編集機能
- [x] 音符の作成・削除・移動
- [x] 音符の長さ調整
- [x] 基本的な選択機能
- [x] 複数音符の選択（矩形選択）

#### 2.1.3 Sprint 5-6: オーディオシステム
- [x] MIDIファイル読み込み
- [x] オーディオ出力システム
- [x] リアルタイム再生エンジン
- [x] クラッシュ修正とデバッグツール

#### 2.1.4 Sprint 7-8: UI/UX改善
- [x] キーボードショートカット
- [x] ツールバー実装
- [x] スクロール機能
- [x] 再生ヘッド表示

### 2.2 Phase 2: 拡張機能実装 🚧 現在実行中

#### 2.2.1 Sprint 9: 音楽理論サポート機能 (現在のスプリント)
**目標: 2025年7月中旬完了**

- [ ] **音名・コード名表示システム**
  - [ ] 単音の音名表示（C, C#, D, etc.）
  - [ ] 和音のコード名検出・表示（C, Am, F, G7, etc.）
  - [ ] リアルタイム表示バー（ステータスバー）
  - [ ] 選択された音符の音名・コード名表示

- [ ] **テンポ・拍子制御システム**
  - [ ] テンポ変更UI（BPM設定）
  - [ ] 拍子変更UI（4/4, 3/4, 6/8, etc.）
  - [ ] メトロノーム機能
  - [ ] テンポ・拍子の視覚的表示

**技術実装詳細:**
```
新規ファイル:
- src/music_theory.py      # 音楽理論処理
- src/ui/status_bar.py     # ステータスバー
- src/ui/tempo_widget.py   # テンポ・拍子制御

修正ファイル:
- src/ui/main_window.py    # ステータスバー統合
- src/midi_data_model.py   # テンポ・拍子データ強化
- src/playback_engine.py   # テンポ変更対応
```

#### 2.2.2 Sprint 10: ファイル操作完全版
- [ ] MIDIファイル保存（完全版）
- [ ] プロジェクトファイル形式（.pydom）
- [ ] オートセーブ機能
- [ ] 最近使ったファイル

#### 2.2.3 Sprint 11-12: 高度編集機能
- [ ] 音符のコピー・ペースト強化
- [ ] 音符のクオンタイズ
- [ ] 音符のトランスポーズ
- [ ] ベロシティエディタ

### 2.3 Phase 3: プロ機能実装 (2025年7月〜9月)

#### 2.3.1 マルチトラック対応
- [ ] 複数トラック表示・編集
- [ ] トラックミキサー
- [ ] 楽器選択（GM音源対応）
- [ ] トラックのソロ・ミュート

#### 2.3.2 高度な音楽機能
- [ ] スケール・キー検出
- [ ] コード進行解析
- [ ] 音楽理論ガイド機能
- [ ] 自動伴奏生成

#### 2.3.3 エクスポート・共有
- [ ] WAVエクスポート
- [ ] MusicXMLエクスポート
- [ ] プロジェクト共有機能
- [ ] プラグインアーキテクチャ

## 3. 現在のスプリント詳細

### Sprint 9: 音楽理論サポート機能 (7/10 - 7/24)

#### Day 1-3: 基盤システム構築
1. **音楽理論処理システム** (`src/music_theory.py`)
   - MIDI番号→音名変換
   - 和音検出アルゴリズム
   - コード名生成ロジック

2. **ステータスバーシステム** (`src/ui/status_bar.py`)
   - リアルタイム情報表示
   - 音名・コード名表示エリア
   - 再生情報表示エリア

#### Day 4-7: UI統合
3. **メインウィンドウ統合** (`src/ui/main_window.py`)
   - ステータスバー追加
   - テンポ・拍子制御UI追加
   - レイアウト調整

4. **テンポ・拍子制御** (`src/ui/tempo_widget.py`)
   - BPMスピンボックス
   - 拍子選択コンボボックス
   - メトロノームトグル

#### Day 8-10: 機能統合・テスト
5. **データモデル拡張**
   - テンポマップ強化
   - 拍子マップ強化

6. **再生エンジン対応**
   - 動的テンポ変更
   - 拍子変更への対応

#### Day 11-14: 最終調整・テスト
7. **総合テスト**
   - 機能テスト
   - パフォーマンステスト
   - UI/UXテスト

8. **ドキュメント更新**
   - 使用方法ガイド更新
   - 技術仕様書更新

## 4. 品質保証

### 4.1 テスト戦略
- **ユニットテスト**: 各モジュールの単体テスト
- **統合テスト**: システム間連携テスト
- **UI/UXテスト**: ユーザビリティテスト
- **パフォーマンステスト**: 大容量データでの動作確認

### 4.2 継続的改善
- **デバッグツール**: 問題特定・解決の効率化
- **パフォーマンス監視**: メモリ使用量・CPU使用率
- **ユーザーフィードバック**: 使いやすさの継続的改善

## 5. リスク管理

### 5.1 技術的リスク
- **オーディオレイテンシ**: 低レイテンシ再生の実現
- **メモリ管理**: 大量音符データの効率的処理
- **クロスプラットフォーム**: 各OS固有の問題対応

### 5.2 対策
- **プロトタイプ開発**: 技術検証の早期実施
- **段階的実装**: 機能を小分けして実装
- **継続的テスト**: 問題の早期発見・修正

---

**最終更新: 2025年7月10日**
**次回レビュー: 2025年7月24日**